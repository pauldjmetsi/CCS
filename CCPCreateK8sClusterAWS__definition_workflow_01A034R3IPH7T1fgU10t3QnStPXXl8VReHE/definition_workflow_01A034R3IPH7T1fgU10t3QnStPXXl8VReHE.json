{
  "workflow": {
    "unique_name": "definition_workflow_01A034R3IPH7T1fgU10t3QnStPXXl8VReHE",
    "name": "CreateK8sClusterAWS",
    "title": "CreateK8sClusterAWS",
    "type": "generic.workflow",
    "base_type": "workflow",
    "variables": [
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "input",
          "name": "wm environment name",
          "type": "datatype.string",
          "is_required": false
        },
        "unique_name": "variable_workflow_01A7XBHIHL8N95aFpx0fulsMtDTxEKVoDvS",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "input",
          "name": "k8s cluster name",
          "type": "datatype.string",
          "is_required": false
        },
        "unique_name": "variable_workflow_01A035E1KYK6U5c0QexavQnkJ8pjwISeBsl",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "local",
          "name": "kube token",
          "type": "datatype.string",
          "is_required": false
        },
        "unique_name": "variable_workflow_01A035NWUZNYD4mMpiSxR3EuaRC1f01DjLa",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "input",
          "name": "wm cloud name",
          "type": "datatype.string",
          "is_required": false
        },
        "unique_name": "variable_workflow_01A035VGZAXTL5PmEIBNfSxl3Nc2eOQ9BrB",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "local",
          "name": "id",
          "type": "datatype.string",
          "description": "AWS Cluster ID",
          "is_required": false
        },
        "unique_name": "variable_workflow_01A1060O5KJNS01ABl1aF0kEX06788yvMb9",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "local",
          "name": "kubeconfig token",
          "type": "datatype.string",
          "is_required": false
        },
        "unique_name": "variable_workflow_01A4KN787XBL17TLpOUOvhC4anOjx30tVdN",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "url",
          "type": "datatype.string",
          "is_required": false
        },
        "unique_name": "variable_workflow_01A5BYF3WVF6S1B1oDX8SWXvINyWNcdLDE0",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "aws url",
          "type": "datatype.string",
          "is_required": false
        },
        "unique_name": "variable_workflow_01A690O1JZ46B5mgwIG28RR3aPWUXAFnWRp",
        "object_type": "variable_workflow"
      }
    ],
    "properties": {
      "atomic": {
        "is_atomic": false
      },
      "delete_workflow_instance": false,
      "display_name": "CreateK8sClusterAWS",
      "favorite": false,
      "runtime_user": {
        "override_target_runtime_user": false,
        "specify_on_workflow_start": false,
        "target_default": true
      },
      "target": {
        "execute_on_target_group": false,
        "execute_on_workflow_target": false,
        "no_target": true,
        "specify_on_workflow_start": false
      }
    },
    "object_type": "definition_workflow",
    "actions": [
      {
        "unique_name": "definition_activity_01A03623TY9OM2drNu8ZYfWWYj7y9lG6l9e",
        "name": "GetTokenCCP",
        "title": "GetTokenCCP",
        "type": "workflow.sub_workflow",
        "base_type": "subworkflow",
        "properties": {
          "continue_on_failure": false,
          "display_name": "GetTokenCCP",
          "runtime_user": {
            "override_target_runtime_user": false,
            "target_default": true
          },
          "skip_execution": false,
          "target": {
            "no_target": true,
            "override_workflow_target": false
          },
          "workflow_id": "definition_workflow_01A02D75Y32MS3HaRgIe01J02tMc99IhT5P"
        },
        "object_type": "definition_activity"
      },
      {
        "unique_name": "definition_activity_01A0366UQY3EG5cGSr3aLyalLhyegwF90ed",
        "name": "HTTP Request",
        "title": "HTTP Request - Create Cluster",
        "type": "web-service.http_request",
        "base_type": "activity",
        "properties": {
          "action_timeout": 180,
          "allow_auto_redirect": true,
          "body": "{\n    \"provider\": \"78dbaf19-cebd-4e45-a4ba-2ceb66842e8c\",\n    \"vpc_sizing\": {\n        \"subnet\": \"10.0.0.0/16\",\n        \"public_subnets\": [\n            \"10.0.1.0/24\",\n            \"10.0.2.0/24\",\n            \"10.0.3.0/24\"\n        ],\n        \"private_subnets\": [\n            \"10.0.4.0/24\",\n            \"10.0.5.0/24\",\n            \"10.0.6.0/24\"\n        ]\n    },\n    \"region\": \"us-west-2\",\n    \"type\": \"eks\",\n    \"ami\": \"ami-0e4ca62d243acf611\",\n    \"instance_type\": \"t2.small\",\n    \"worker_count\": 2,\n    \"k8s_version\": \"1.12\",\n    \"access_role_arn\": \"arn:aws:iam::644383678152:role/k8s-ccp-user\",\n    \"name\": \"$workflow.definition_workflow_01A034R3IPH7T1fgU10t3QnStPXXl8VReHE.input.variable_workflow_01A035E1KYK6U5c0QexavQnkJ8pjwISeBsl$\",\n    \"ssh_keys\": [\n        \"ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIM7ePHODw3f97S52qNz3H+VMvkWjF3gwZakarDT/zQog mikes@ubuntu\"\n    ]\n}",
          "content_type": "application/json",
          "continue_on_error_status_code": false,
          "continue_on_failure": false,
          "custom_headers": [
            {
              "name": "X-Auth-Token",
              "value": "$activity.definition_activity_01A03623TY9OM2drNu8ZYfWWYj7y9lG6l9e.output.variable_workflow_01A02DVB2KJYZ0PoofI8vZLrq3JQkLUNWAD$"
            }
          ],
          "display_name": "HTTP Request - Create Cluster",
          "method": "POST",
          "relative_url": "/v3/clusters/",
          "runtime_user": {
            "override_target_runtime_user": false,
            "target_default": true
          },
          "skip_execution": false,
          "target": {
            "override_workflow_target": true,
            "target_id": "definition_target_01A02HABTW7342oR17U09tYEK8FDpqNb4no"
          }
        },
        "object_type": "definition_activity"
      },
      {
        "unique_name": "definition_activity_01A5CDQFHBTT52vhv3tzV382zJPXv9hwtRM",
        "name": "Sleep",
        "title": "Sleep",
        "type": "core.sleep",
        "base_type": "activity",
        "properties": {
          "continue_on_failure": false,
          "display_name": "Sleep",
          "skip_execution": false,
          "sleep_interval": 900
        },
        "object_type": "definition_activity"
      },
      {
        "unique_name": "definition_activity_01A1066LF61PD1239lLDvUoy3paMe9xKpbW",
        "name": "JSONPath Query",
        "title": "JSONPath Query - Get Cluster ID",
        "type": "corejava.jsonpathquery",
        "base_type": "activity",
        "properties": {
          "action_timeout": 180,
          "continue_on_failure": false,
          "display_name": "JSONPath Query - Get Cluster ID",
          "input_json": "$activity.definition_activity_01A0366UQY3EG5cGSr3aLyalLhyegwF90ed.output.response_body$",
          "jsonpath_queries": [
            {
              "jsonpath_query": "$.id",
              "jsonpath_query_name": "id",
              "jsonpath_query_type": "string"
            }
          ],
          "skip_execution": false
        },
        "object_type": "definition_activity"
      },
      {
        "unique_name": "definition_activity_01A106DLADGWV6oDy6p80gImCeC1TPT7vjZ",
        "name": "Set Variables",
        "title": "Set Variables - ID",
        "type": "core.set_multiple_variables",
        "base_type": "activity",
        "properties": {
          "continue_on_failure": false,
          "display_name": "Set Variables - ID",
          "skip_execution": false,
          "variables_to_update": [
            {
              "variable_to_update": "$workflow.definition_workflow_01A034R3IPH7T1fgU10t3QnStPXXl8VReHE.local.variable_workflow_01A1060O5KJNS01ABl1aF0kEX06788yvMb9$",
              "variable_value_new": "$activity.definition_activity_01A1066LF61PD1239lLDvUoy3paMe9xKpbW.output.jsonpath_queries.id$"
            }
          ]
        },
        "object_type": "definition_activity"
      },
      {
        "unique_name": "definition_activity_01A4LGLDU0T3915TFmSw8ndI1EIY8ZsY351",
        "name": "HTTP Request",
        "title": "HTTP Request - Get Cluster Info",
        "type": "web-service.http_request",
        "base_type": "activity",
        "properties": {
          "action_timeout": 180,
          "allow_auto_redirect": true,
          "content_type": "application/json",
          "continue_on_error_status_code": false,
          "continue_on_failure": false,
          "custom_headers": [
            {
              "name": "X-Auth-Token",
              "value": "$activity.definition_activity_01A03623TY9OM2drNu8ZYfWWYj7y9lG6l9e.output.variable_workflow_01A02DVB2KJYZ0PoofI8vZLrq3JQkLUNWAD$"
            }
          ],
          "display_name": "HTTP Request - Get Cluster Info",
          "method": "GET",
          "relative_url": "/v3/clusters/$workflow.definition_workflow_01A034R3IPH7T1fgU10t3QnStPXXl8VReHE.local.variable_workflow_01A1060O5KJNS01ABl1aF0kEX06788yvMb9$",
          "runtime_user": {
            "override_target_runtime_user": false,
            "target_default": true
          },
          "skip_execution": false,
          "target": {
            "override_workflow_target": true,
            "override_workflow_target_group_criteria": false,
            "target_id": "definition_target_01A02HABTW7342oR17U09tYEK8FDpqNb4no",
            "use_workflow_target_group": false
          }
        },
        "object_type": "definition_activity"
      },
      {
        "unique_name": "definition_activity_01A68Y72F6JAY3xT5dhMqmWuROaucys1npV",
        "name": "JSONPath Query",
        "title": "JSONPath Query - get kubeconfig",
        "type": "corejava.jsonpathquery",
        "base_type": "activity",
        "properties": {
          "action_timeout": 180,
          "continue_on_failure": false,
          "display_name": "JSONPath Query - get kubeconfig",
          "input_json": "$activity.definition_activity_01A4LGLDU0T3915TFmSw8ndI1EIY8ZsY351.output.response_body$",
          "jsonpath_queries": [
            {
              "jsonpath_query": "$.kubeconfig",
              "jsonpath_query_name": "kubeconfig",
              "jsonpath_query_type": "string"
            }
          ],
          "skip_execution": false
        },
        "object_type": "definition_activity"
      },
      {
        "unique_name": "definition_activity_01A68Z8FPI27C77YhKLfY1a5CYmKpTQYiJk",
        "name": "Match Regular Expression",
        "title": "Match Regular Expression",
        "type": "core.matchregex",
        "base_type": "activity",
        "properties": {
          "continue_on_failure": false,
          "display_name": "Match Regular Expression",
          "input_regex": "(https:).*?(.com)",
          "input_string": "$activity.definition_activity_01A68Y72F6JAY3xT5dhMqmWuROaucys1npV.output.jsonpath_queries.kubeconfig$",
          "skip_execution": false
        },
        "object_type": "definition_activity"
      },
      {
        "unique_name": "definition_activity_01A690U52KZY72MzzZdeBmYxgj8Mlj9I6ik",
        "name": "Set Variables",
        "title": "Set Variables - aws url",
        "type": "core.set_multiple_variables",
        "base_type": "activity",
        "properties": {
          "continue_on_failure": false,
          "display_name": "Set Variables - aws url",
          "skip_execution": false,
          "variables_to_update": [
            {
              "variable_to_update": "$workflow.definition_workflow_01A034R3IPH7T1fgU10t3QnStPXXl8VReHE.output.variable_workflow_01A690O1JZ46B5mgwIG28RR3aPWUXAFnWRp$",
              "variable_value_new": "$activity.definition_activity_01A68Z8FPI27C77YhKLfY1a5CYmKpTQYiJk.output.matching_strings[0]$"
            }
          ]
        },
        "object_type": "definition_activity"
      },
      {
        "unique_name": "definition_activity_01A64PXZT69ZD4hk7wlnYhzXYB345K9wY5U",
        "name": "GetAwsK8sClusterToken",
        "title": "GetAwsK8sClusterToken",
        "type": "workflow.sub_workflow",
        "base_type": "subworkflow",
        "properties": {
          "continue_on_failure": false,
          "display_name": "GetAwsK8sClusterToken",
          "input": {
            "variable_workflow_01A64J5APRTHB5CjFkCRJMZ8225lELI9P8Y": "$workflow.definition_workflow_01A034R3IPH7T1fgU10t3QnStPXXl8VReHE.input.variable_workflow_01A035E1KYK6U5c0QexavQnkJ8pjwISeBsl$"
          },
          "runtime_user": {
            "target_default": true
          },
          "skip_execution": false,
          "target": {
            "execute_on_this_target": true,
            "target_id": "definition_target_01A1ZZS054XZR60I7Ygs5UyI2Fkq493DhgO",
            "target_type": "terminal.unix_linux_endpoint"
          },
          "workflow_id": "definition_workflow_01A64IBF6VJ1L5JW7jADDbTWbfYRQuoMmw6"
        },
        "object_type": "definition_activity"
      },
      {
        "unique_name": "definition_activity_01A4KMHPD6IHC2FoVptZ67iHynIkUymCclw",
        "name": "Set Variables",
        "title": "Set Variables - k8s token",
        "type": "core.set_multiple_variables",
        "base_type": "activity",
        "properties": {
          "continue_on_failure": false,
          "display_name": "Set Variables - k8s token",
          "skip_execution": false,
          "variables_to_update": [
            {
              "variable_to_update": "$workflow.definition_workflow_01A034R3IPH7T1fgU10t3QnStPXXl8VReHE.local.variable_workflow_01A4KN787XBL17TLpOUOvhC4anOjx30tVdN$",
              "variable_value_new": "$activity.definition_activity_01A64PXZT69ZD4hk7wlnYhzXYB345K9wY5U.output.variable_workflow_01A64JFT3HIXQ4EL2BA0dgOSO1uSgFWwoat$"
            }
          ]
        },
        "object_type": "definition_activity"
      },
      {
        "unique_name": "definition_activity_01A4L810J2MOE15dJatR7rV1Y3HU2RaxJmS",
        "name": "Generic CCS API Request",
        "title": "Generic CCS API Request - Create Cloud",
        "type": "ccs.api_request",
        "base_type": "activity",
        "properties": {
          "action_timeout": 180,
          "api_body": "{\n    \"cloudFamily\": \"Kubernetes\",\n    \"cloudFamilyType\": \"Container\",\n    \"tenantId\": 1,\n    \"enableProxyForCloudEndpoint\": false,\n    \"enableProxyForWorker\": false,\n    \"amqpAccessibleFromCloud\": true,\n    \"name\": \"$workflow.definition_workflow_01A034R3IPH7T1fgU10t3QnStPXXl8VReHE.input.variable_workflow_01A035VGZAXTL5PmEIBNfSxl3Nc2eOQ9BrB$\",\n    \"description\": \"\",\n    \"regionEndpoint\": \"$workflow.definition_workflow_01A034R3IPH7T1fgU10t3QnStPXXl8VReHE.output.variable_workflow_01A690O1JZ46B5mgwIG28RR3aPWUXAFnWRp$\"\n}",
          "api_call_method": "POST",
          "continue_on_failure": false,
          "display_name": "Generic CCS API Request - Create Cloud",
          "relative_url": "/cloudcenter-cloud-setup/api/v1/tenants/1/clouds",
          "runtime_user": {
            "override_target_runtime_user": false,
            "target_default": true
          },
          "skip_execution": false,
          "target": {
            "override_workflow_target": true,
            "target_id": "definition_target_016K3ZWK8QGW50gzw2hmwiUndbcNg9AJ8sf"
          }
        },
        "object_type": "definition_activity"
      },
      {
        "unique_name": "definition_activity_01A5C2DNMKY4E2RWwTPeTFRK8rKgbiaP22B",
        "name": "JSONPath Query",
        "title": "JSONPath Query - Get Cloud Id",
        "type": "corejava.jsonpathquery",
        "base_type": "activity",
        "properties": {
          "action_timeout": 180,
          "continue_on_failure": false,
          "display_name": "JSONPath Query - Get Cloud Id",
          "input_json": "$activity.definition_activity_01A4L810J2MOE15dJatR7rV1Y3HU2RaxJmS.output.response_body$",
          "jsonpath_queries": [
            {
              "jsonpath_query": "$.id",
              "jsonpath_query_name": "cloud id",
              "jsonpath_query_type": "string"
            }
          ],
          "skip_execution": false
        },
        "object_type": "definition_activity"
      },
      {
        "unique_name": "definition_activity_01A5C34DUDACV04dctHl2SiFqgO9WZl3cAM",
        "name": "Sleep",
        "title": "Sleep",
        "type": "core.sleep",
        "base_type": "activity",
        "properties": {
          "continue_on_failure": false,
          "display_name": "Sleep",
          "skip_execution": false,
          "sleep_interval": 240
        },
        "object_type": "definition_activity"
      },
      {
        "unique_name": "definition_activity_01A5C3BHGTGBN1viJdRfkeGSjH7xrt6qPU4",
        "name": "Generic CCS API Request",
        "title": "Generic CCS API Request - Create Cloud Account",
        "type": "ccs.api_request",
        "base_type": "activity",
        "properties": {
          "action_timeout": 180,
          "api_body": "{\n\t\"displayName\": \"pauldj\",\n\t\"accountDescription\": \"\",\n\t\"enableAccountFor\": \"PROVISIONING_REPORTING\",\n\t\"userId\": 1,\n\t\"cloudId\": \"$activity.definition_activity_01A5C2DNMKY4E2RWwTPeTFRK8rKgbiaP22B.output.jsonpath_queries.cloud id$\",\n\t\"allowedUsers\": [],\n\t\"enableReportingByOrg\": false,\n\t\"accountName\": \"pauldj\",\n\t\"accountPassword\": \"$workflow.definition_workflow_01A034R3IPH7T1fgU10t3QnStPXXl8VReHE.local.variable_workflow_01A4KN787XBL17TLpOUOvhC4anOjx30tVdN$\",\n\t\"accountId\": \"pauldj\",\n\t\"accountProperties\": []\n}",
          "api_call_method": "POST",
          "continue_on_failure": false,
          "display_name": "Generic CCS API Request - Create Cloud Account",
          "relative_url": "/cloudcenter-cloud-setup/api/v1/tenants/1/clouds/$activity.definition_activity_01A5C2DNMKY4E2RWwTPeTFRK8rKgbiaP22B.output.jsonpath_queries.cloud id$/accounts",
          "runtime_user": {
            "override_target_runtime_user": false,
            "target_default": true
          },
          "skip_execution": false,
          "target": {
            "override_workflow_target": true,
            "target_id": "definition_target_016K3ZWK8QGW50gzw2hmwiUndbcNg9AJ8sf"
          }
        },
        "object_type": "definition_activity"
      },
      {
        "unique_name": "definition_activity_01A7W7HSNQ0S06TXUBGeVrNQ6CgjhvG7Wys",
        "name": "Generic CCS API Request",
        "title": "Generic CCS API Request - Instance Type Small",
        "type": "ccs.api_request",
        "base_type": "activity",
        "properties": {
          "action_timeout": 180,
          "api_body": "{\n\t\"name\": \"Small\",\n\t\"description\": null,\n\t\"type\": \"small\",\n\t\"cloudId\": \"22\",\n\t\"regionId\": \"22\",\n\t\"costPerHour\": 0.02,\n\t\"costPerHourPreferredCurrency\": 0.02,\n\t\"memorySize\": 64,\n\t\"numOfCpus\": 100,\n\t\"cpuUnit\": \"VIRTUAL_CPU\",\n\t\"numOfNics\": 0,\n\t\"localStorageCount\": 0,\n\t\"localStorageSize\": 0,\n\t\"supportsCuda\": false,\n\t\"supportsSsd\": false,\n\t\"supports32Bit\": false,\n\t\"supports64Bit\": false,\n\t\"supportsHardwareProvision\": false,\n\t\"serviceCategory\": \"COMPUTE\"\n}",
          "api_call_method": "POST",
          "continue_on_failure": false,
          "display_name": "Generic CCS API Request - Instance Type Small",
          "relative_url": "/cloudcenter-cloud-setup/api/v1/tenants/1/clouds/$activity.definition_activity_01A5C2DNMKY4E2RWwTPeTFRK8rKgbiaP22B.output.jsonpath_queries.cloud id$/regions/$activity.definition_activity_01A5C2DNMKY4E2RWwTPeTFRK8rKgbiaP22B.output.jsonpath_queries.cloud id$/instanceTypes",
          "runtime_user": {
            "override_target_runtime_user": false,
            "target_default": true
          },
          "skip_execution": false,
          "target": {
            "override_workflow_target": true,
            "target_id": "definition_target_01f9IQgvQRJv3tvlqwR145Bbrye0toH0Q"
          }
        },
        "object_type": "definition_activity"
      },
      {
        "unique_name": "definition_activity_01A7W8UUPR7CZ2BSoSXDbY0hxDBbzuVi4dQ",
        "name": "Generic CCS API Request",
        "title": "Generic CCS API Request - Instance Type Medium",
        "type": "ccs.api_request",
        "base_type": "activity",
        "properties": {
          "action_timeout": 180,
          "api_body": "{\n\t\"name\": \"Medium\",\n\t\"description\": null,\n\t\"type\": \"medium\",\n\t\"cloudId\": \"22\",\n\t\"regionId\": \"22\",\n\t\"costPerHour\": 0.05,\n\t\"costPerHourPreferredCurrency\": 0.04,\n\t\"memorySize\": 128,\n\t\"numOfCpus\": 250,\n\t\"cpuUnit\": \"VIRTUAL_CPU\",\n\t\"numOfNics\": 0,\n\t\"localStorageCount\": 0,\n\t\"localStorageSize\": 0,\n\t\"supportsCuda\": false,\n\t\"supportsSsd\": false,\n\t\"supports32Bit\": false,\n\t\"supports64Bit\": false,\n\t\"supportsHardwareProvision\": false,\n\t\"serviceCategory\": \"COMPUTE\"\n}",
          "api_call_method": "POST",
          "continue_on_failure": false,
          "display_name": "Generic CCS API Request - Instance Type Medium",
          "relative_url": "/cloudcenter-cloud-setup/api/v1/tenants/1/clouds/$activity.definition_activity_01A5C2DNMKY4E2RWwTPeTFRK8rKgbiaP22B.output.jsonpath_queries.cloud id$/regions/$activity.definition_activity_01A5C2DNMKY4E2RWwTPeTFRK8rKgbiaP22B.output.jsonpath_queries.cloud id$/instanceTypes",
          "runtime_user": {
            "override_target_runtime_user": false,
            "target_default": true
          },
          "skip_execution": false,
          "target": {
            "override_workflow_target": true,
            "target_id": "definition_target_01f9IQgvQRJv3tvlqwR145Bbrye0toH0Q"
          }
        },
        "object_type": "definition_activity"
      },
      {
        "unique_name": "definition_activity_01A7W95BXN6BO6Da4wjhYQHVmLOzwmQRfO4",
        "name": "Generic CCS API Request",
        "title": "Generic CCS API Request - Instance Type Large",
        "type": "ccs.api_request",
        "base_type": "activity",
        "properties": {
          "action_timeout": 180,
          "api_body": "{\n\t\"name\": \"Large\",\n\t\"description\": null,\n\t\"type\": \"large\",\n\t\"cloudId\": \"22\",\n\t\"regionId\": \"22\",\n\t\"costPerHour\": 0.08,\n\t\"costPerHourPreferredCurrency\": 0.06,\n\t\"memorySize\": 256,\n\t\"numOfCpus\": 500,\n\t\"cpuUnit\": \"VIRTUAL_CPU\",\n\t\"numOfNics\": 0,\n\t\"localStorageCount\": 0,\n\t\"localStorageSize\": 0,\n\t\"supportsCuda\": false,\n\t\"supportsSsd\": false,\n\t\"supports32Bit\": false,\n\t\"supports64Bit\": false,\n\t\"supportsHardwareProvision\": false,\n\t\"serviceCategory\": \"COMPUTE\"\n}",
          "api_call_method": "POST",
          "continue_on_failure": false,
          "display_name": "Generic CCS API Request - Instance Type Large",
          "relative_url": "/cloudcenter-cloud-setup/api/v1/tenants/1/clouds/$activity.definition_activity_01A5C2DNMKY4E2RWwTPeTFRK8rKgbiaP22B.output.jsonpath_queries.cloud id$/regions/$activity.definition_activity_01A5C2DNMKY4E2RWwTPeTFRK8rKgbiaP22B.output.jsonpath_queries.cloud id$/instanceTypes",
          "runtime_user": {
            "override_target_runtime_user": false,
            "target_default": true
          },
          "skip_execution": false,
          "target": {
            "override_workflow_target": true,
            "target_id": "definition_target_01f9IQgvQRJv3tvlqwR145Bbrye0toH0Q"
          }
        },
        "object_type": "definition_activity"
      },
      {
        "unique_name": "definition_activity_01A7X8SF0ZIXS2EwgIt6KR4W9GY7TLAPzyn",
        "name": "Generic CCS API Request",
        "title": "Generic CCS API Request - Get Cloud Account",
        "type": "ccs.api_request",
        "base_type": "activity",
        "properties": {
          "action_timeout": 180,
          "api_call_method": "GET",
          "continue_on_failure": false,
          "display_name": "Generic CCS API Request - Get Cloud Account",
          "relative_url": "cloudcenter-cloud-setup/api/v1/tenants/1/clouds/$activity.definition_activity_01A5C2DNMKY4E2RWwTPeTFRK8rKgbiaP22B.output.jsonpath_queries.cloud id$/accounts",
          "runtime_user": {
            "override_target_runtime_user": false,
            "target_default": true
          },
          "skip_execution": false,
          "target": {
            "override_workflow_target": true,
            "target_id": "definition_target_01f9IQgvQRJv3tvlqwR145Bbrye0toH0Q"
          }
        },
        "object_type": "definition_activity"
      },
      {
        "unique_name": "definition_activity_01A7X9OS7Z5RI1sdr0JDajFrNP7hT0mYMEA",
        "name": "JSONPath Query",
        "title": "JSONPath Query - Get Account Id",
        "type": "corejava.jsonpathquery",
        "base_type": "activity",
        "properties": {
          "action_timeout": 180,
          "continue_on_failure": false,
          "display_name": "JSONPath Query - Get Account Id",
          "input_json": "$activity.definition_activity_01A7X8SF0ZIXS2EwgIt6KR4W9GY7TLAPzyn.output.response_body$",
          "jsonpath_queries": [
            {
              "jsonpath_query": "$..id",
              "jsonpath_query_name": "account id",
              "jsonpath_query_type": "string"
            }
          ],
          "skip_execution": false
        },
        "object_type": "definition_activity"
      },
      {
        "unique_name": "definition_activity_01A7XA8U2D4IK5RWu0s6WXXDAirBCp8FVxH",
        "name": "Generic CCS API Request",
        "title": "Generic CCS API Request - Create Environment",
        "type": "ccs.api_request",
        "base_type": "activity",
        "properties": {
          "action_timeout": 180,
          "api_body": "{\n\t\"name\": \"$workflow.definition_workflow_01A034R3IPH7T1fgU10t3QnStPXXl8VReHE.input.variable_workflow_01A7XBHIHL8N95aFpx0fulsMtDTxEKVoDvS$\",\n\t\"description\": \"\",\n\t\"defaultSettings\": \"\",\n\t\"owner\": 1,\n\t\"vendorName\": \"metsi\",\n\t\"requiresApproval\": false,\n\t\"associatedClouds\": [\n\t\t{\n\t\t\t\"regionId\": \"$activity.definition_activity_01A5C2DNMKY4E2RWwTPeTFRK8rKgbiaP22B.output.jsonpath_queries.cloud id$\",\n\t\t\t\"regionName\": \"$workflow.definition_workflow_01A034R3IPH7T1fgU10t3QnStPXXl8VReHE.input.variable_workflow_01A035VGZAXTL5PmEIBNfSxl3Nc2eOQ9BrB$-default\",\n\t\t\t\"regionDisplayName\": \"default\",\n\t\t\t\"cloudFamily\": \"Kubernetes\",\n\t\t\t\"cloudId\": \"$activity.definition_activity_01A5C2DNMKY4E2RWwTPeTFRK8rKgbiaP22B.output.jsonpath_queries.cloud id$\",\n\t\t\t\"cloudAccountId\": \"$activity.definition_activity_01A7X9OS7Z5RI1sdr0JDajFrNP7hT0mYMEA.output.jsonpath_queries.account id$\",\n\t\t\t\"cloudName\": \"$workflow.definition_workflow_01A034R3IPH7T1fgU10t3QnStPXXl8VReHE.input.variable_workflow_01A035VGZAXTL5PmEIBNfSxl3Nc2eOQ9BrB$\",\n\t\t\t\"cloudAccountName\": \"pauldj\",\n\t\t\t\"networkSettings\": [],\n\t\t\t\"defaultInstance\": {\n\t\t\t\t\"instanceTypeSelection\": \"ALL_INSTANCES\"\n\t\t\t},\n\t\t\t\"defaultSshKey\": {\n\t\t\t\t\"keyName\": null,\n\t\t\t\t\"keyText\": null,\n\t\t\t\t\"persistPrivateKey\": false,\n\t\t\t\t\"preference\": \"VISIBLE_UNLOCKED\"\n\t\t\t},\n\t\t\t\"basicSettings\": [\n\t\t\t\t{\n\t\t\t\t\t\"name\": \"namespace\",\n\t\t\t\t\t\"value\": \"default\"\n\t\t\t\t}\n\t\t\t],\n\t\t\t\"preference\": \"VISIBLE_UNLOCKED\",\n\t\t\t\"defaultCloudSettings\": [],\n\t\t\t\"enableResourcePlacement\": false,\n\t\t\t\"enableResourceValidation\": false,\n\t\t\t\"resourcePlacementScript\": null,\n\t\t\t\"resourceValidationScript\": null,\n\t\t\t\"calloutPackage\": null,\n\t\t\t\"cloudAssociationDefaults\": [\n\t\t\t\t{\n\t\t\t\t\t\"name\": \"namespace\",\n\t\t\t\t\t\"value\": \"default\"\n\t\t\t\t}\n\t\t\t],\n\t\t\t\"default\": true\n\t\t}\n\t]\n}",
          "api_call_method": "POST",
          "continue_on_failure": false,
          "display_name": "Generic CCS API Request - Create Environment",
          "relative_url": "/cloudcenter-ccm-backend/api/v1/environments/",
          "runtime_user": {
            "override_target_runtime_user": false,
            "target_default": true
          },
          "skip_execution": false,
          "target": {
            "override_workflow_target": true,
            "target_id": "definition_target_01f9IQgvQRJv3tvlqwR145Bbrye0toH0Q"
          }
        },
        "object_type": "definition_activity"
      }
    ],
    "categories": [
      "category_1BMfMXSnJMyt5Ihqi7rWJr5N8cf"
    ]
  },
  "targets": {
    "definition_target_016K3ZWK8QGW50gzw2hmwiUndbcNg9AJ8sf": {
      "unique_name": "definition_target_016K3ZWK8QGW50gzw2hmwiUndbcNg9AJ8sf",
      "name": "CCS Admin",
      "title": "CCS Admin",
      "type": "ccsuite.endpoint",
      "base_type": "target",
      "object_type": "definition_target",
      "properties": {
        "default_runtime_user_id": "definition_runtime_user_016J2UBE5MNC13AwWHPyfO0IwLmZ2BQXv4i",
        "display_name": "CCS Admin",
        "host": "172.21.8.72",
        "port": 5143,
        "protocol": "https"
      }
    },
    "definition_target_01A02HABTW7342oR17U09tYEK8FDpqNb4no": {
      "unique_name": "definition_target_01A02HABTW7342oR17U09tYEK8FDpqNb4no",
      "name": "CCP 4.2 Admin",
      "title": "CCP 4.2 Admin",
      "type": "web-service.endpoint",
      "base_type": "target",
      "object_type": "definition_target",
      "properties": {
        "default_runtime_user_id": "definition_runtime_user_0181EVJJV1VJ425vSoV951smRyppl326R7a",
        "description": "CCP for FreeNet testing",
        "disable_certificate_validation": true,
        "display_name": "CCP 4.2 Admin",
        "host": "172.21.9.2",
        "no_runtime_user": false,
        "port": 443,
        "protocol": "https"
      }
    },
    "definition_target_01A1ZZS054XZR60I7Ygs5UyI2Fkq493DhgO": {
      "unique_name": "definition_target_01A1ZZS054XZR60I7Ygs5UyI2Fkq493DhgO",
      "name": "cccp-aws-cli",
      "title": "cccp-aws-cli",
      "type": "terminal.unix_linux_endpoint",
      "base_type": "target",
      "object_type": "definition_target",
      "properties": {
        "bash_shell": "/bin/bash",
        "default_runtime_user_id": "definition_runtime_user_01A1ZZJ7LB693443hhddnEYUez6dl1itDq2",
        "display_name": "cccp-aws-cli",
        "host": "172.21.9.33",
        "port": 22
      }
    }
  },
  "runtime_users": {
    "definition_runtime_user_016J2UBE5MNC13AwWHPyfO0IwLmZ2BQXv4i": {
      "unique_name": "definition_runtime_user_016J2UBE5MNC13AwWHPyfO0IwLmZ2BQXv4i",
      "name": "CCS Admin",
      "title": "CCS Admin",
      "type": "runtime_user.ccs_explicit_user",
      "base_type": "runtime_user",
      "object_type": "definition_runtime_user",
      "properties": {
        "display_name": "CCS Admin",
        "password": "*****",
        "tenant_id": "*****",
        "username": "*****"
      }
    },
    "definition_runtime_user_0181EVJJV1VJ425vSoV951smRyppl326R7a": {
      "unique_name": "definition_runtime_user_0181EVJJV1VJ425vSoV951smRyppl326R7a",
      "name": "CCP Admin",
      "title": "CCP Admin",
      "type": "runtime_user.web-service_basic_credentials",
      "base_type": "runtime_user",
      "object_type": "definition_runtime_user",
      "properties": {
        "basic_password": "*****",
        "basic_username": "*****",
        "display_name": "CCP Admin"
      }
    },
    "definition_runtime_user_01A1ZZJ7LB693443hhddnEYUez6dl1itDq2": {
      "unique_name": "definition_runtime_user_01A1ZZJ7LB693443hhddnEYUez6dl1itDq2",
      "name": "root for ccp-aws-cli vm",
      "title": "root for ccp-aws-cli vm",
      "type": "runtime_user.terminal_password_credentials",
      "base_type": "runtime_user",
      "object_type": "definition_runtime_user",
      "properties": {
        "admin_password": "*****",
        "display_name": "root for ccp-aws-cli vm",
        "password": "*****",
        "user": "*****"
      }
    }
  },
  "subworkflows": [
    {
      "workflow": {
        "unique_name": "definition_workflow_01A02D75Y32MS3HaRgIe01J02tMc99IhT5P",
        "name": "GetTokenCCP",
        "title": "GetTokenCCP",
        "type": "generic.workflow",
        "base_type": "workflow",
        "variables": [
          {
            "schema_id": "datatype.string",
            "properties": {
              "value": "",
              "scope": "output",
              "name": "CCS Cookie",
              "type": "datatype.string",
              "is_required": false
            },
            "unique_name": "variable_workflow_01A02DVB2KJYZ0PoofI8vZLrq3JQkLUNWAD",
            "object_type": "variable_workflow"
          }
        ],
        "properties": {
          "atomic": {
            "is_atomic": false
          },
          "delete_workflow_instance": false,
          "display_name": "GetTokenCCP",
          "favorite": false,
          "runtime_user": {
            "override_target_runtime_user": false,
            "specify_on_workflow_start": false,
            "target_default": true
          },
          "target": {
            "execute_on_target_group": false,
            "execute_on_workflow_target": false,
            "no_target": true,
            "specify_on_workflow_start": false
          }
        },
        "object_type": "definition_workflow",
        "actions": [
          {
            "unique_name": "definition_activity_01A02FMA0XVFY0FJcieyaXGtp8qVi2hAo7x",
            "name": "HTTP Request",
            "title": "HTTP Request",
            "type": "web-service.http_request",
            "base_type": "activity",
            "properties": {
              "action_timeout": 180,
              "allow_auto_redirect": true,
              "body": "username=admin\u0026password=M3tsiT3ch!23",
              "continue_on_error_status_code": false,
              "continue_on_failure": false,
              "custom_headers": [
                {
                  "name": "Content-Type",
                  "value": "application/x-www-form-urlencoded"
                }
              ],
              "display_name": "HTTP Request",
              "method": "POST",
              "relative_url": "/2/system/login",
              "runtime_user": {
                "override_target_runtime_user": false,
                "target_default": true
              },
              "skip_execution": false,
              "target": {
                "override_workflow_target": true,
                "target_id": "definition_target_01A02HABTW7342oR17U09tYEK8FDpqNb4no"
              }
            },
            "object_type": "definition_activity"
          },
          {
            "unique_name": "definition_activity_01A5YVXZKHCZP7Izjf3zmYf3jf8D86KgMhF",
            "name": "Replace String",
            "title": "Replace String",
            "type": "core.replacestring",
            "base_type": "activity",
            "properties": {
              "continue_on_failure": false,
              "display_name": "Replace String",
              "input_string": "$activity.definition_activity_01A02FMA0XVFY0FJcieyaXGtp8qVi2hAo7x.output.cookie[0]$",
              "replace_list": [
                {
                  "replaced_string": "CXAccessToken=",
                  "replacement_string": ""
                },
                {
                  "replaced_string": "; Path=/",
                  "replacement_string": ""
                }
              ],
              "skip_execution": false
            },
            "object_type": "definition_activity"
          },
          {
            "unique_name": "definition_activity_01A033GKXE5PW2axtZfPUf2DKFjQr8lV2C1",
            "name": "Set Variables",
            "title": "Set Variables - Cookie",
            "type": "core.set_multiple_variables",
            "base_type": "activity",
            "properties": {
              "continue_on_failure": false,
              "display_name": "Set Variables - Cookie",
              "skip_execution": false,
              "variables_to_update": [
                {
                  "variable_to_update": "$workflow.definition_workflow_01A02D75Y32MS3HaRgIe01J02tMc99IhT5P.output.variable_workflow_01A02DVB2KJYZ0PoofI8vZLrq3JQkLUNWAD$",
                  "variable_value_new": "$activity.definition_activity_01A5YVXZKHCZP7Izjf3zmYf3jf8D86KgMhF.output.result_string$"
                }
              ]
            },
            "object_type": "definition_activity"
          }
        ],
        "categories": [
          "category_1BMfMXSnJMyt5Ihqi7rWJr5N8cf"
        ]
      }
    },
    {
      "workflow": {
        "unique_name": "definition_workflow_01A64IBF6VJ1L5JW7jADDbTWbfYRQuoMmw6",
        "name": "GetAwsK8sClusterToken",
        "title": "GetAwsK8sClusterToken",
        "type": "generic.workflow",
        "base_type": "workflow",
        "variables": [
          {
            "schema_id": "datatype.string",
            "properties": {
              "value": "",
              "scope": "input",
              "name": "clustername",
              "type": "datatype.string",
              "is_required": false
            },
            "unique_name": "variable_workflow_01A64J5APRTHB5CjFkCRJMZ8225lELI9P8Y",
            "object_type": "variable_workflow"
          },
          {
            "schema_id": "datatype.string",
            "properties": {
              "value": "",
              "scope": "output",
              "name": "token",
              "type": "datatype.string",
              "is_required": false
            },
            "unique_name": "variable_workflow_01A64JFT3HIXQ4EL2BA0dgOSO1uSgFWwoat",
            "object_type": "variable_workflow"
          }
        ],
        "properties": {
          "atomic": {
            "is_atomic": false
          },
          "delete_workflow_instance": false,
          "display_name": "GetAwsK8sClusterToken",
          "runtime_user": {
            "override_target_runtime_user": false,
            "specify_on_workflow_start": false,
            "target_default": true
          },
          "target": {
            "target_type": "terminal.unix_linux_endpoint",
            "target_id": "definition_target_01A1ZZS054XZR60I7Ygs5UyI2Fkq493DhgO",
            "execute_on_workflow_target": true
          }
        },
        "object_type": "definition_workflow",
        "actions": [
          {
            "unique_name": "definition_activity_01A7Q1NO218BB46ox5JpNtZ1Sh6xvNIYvVJ",
            "name": "Execute Linux/Unix SSH Command",
            "title": "Execute Linux/Unix SSH Command - dashboard and svc account",
            "type": "terminal.ssh_command",
            "base_type": "activity",
            "properties": {
              "action_timeout": 180,
              "command": "export PATH=~/.local/bin:$PATH\naws eks --region us-west-2 update-kubeconfig --name $workflow.definition_workflow_01A64IBF6VJ1L5JW7jADDbTWbfYRQuoMmw6.input.variable_workflow_01A64J5APRTHB5CjFkCRJMZ8225lELI9P8Y$\nkubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v1.10.1/src/deploy/recommended/kubernetes-dashboard.yaml\nkubectl apply -f https://raw.githubusercontent.com/kubernetes/heapster/master/deploy/kube-config/influxdb/heapster.yaml\nkubectl apply -f https://raw.githubusercontent.com/kubernetes/heapster/master/deploy/kube-config/influxdb/influxdb.yaml\nkubectl apply -f https://raw.githubusercontent.com/kubernetes/heapster/master/deploy/kube-config/rbac/heapster-rbac.yaml\nkubectl apply -f eks-admin-service-account.yaml",
              "command_timeout": 60,
              "continue_on_failure": false,
              "description": "Install dashboard and create service account",
              "display_name": "Execute Linux/Unix SSH Command - dashboard and svc account",
              "runtime_user": {
                "override_target_runtime_user": false,
                "target_default": true
              },
              "skip_execution": false,
              "target": {
                "override_workflow_target": false,
                "override_workflow_target_group_criteria": false,
                "use_workflow_target": true,
                "use_workflow_target_group": false
              }
            },
            "object_type": "definition_activity"
          },
          {
            "unique_name": "definition_activity_01A7Q4F66VBR00EANjwsXHLuikcFa1oOwPz",
            "name": "Execute Linux/Unix SSH Command",
            "title": "Execute Linux/Unix SSH Command - get token",
            "type": "terminal.ssh_command",
            "base_type": "activity",
            "properties": {
              "action_timeout": 180,
              "command": "export PATH=~/.local/bin:$PATH\nkubectl -n kube-system describe secret $(kubectl -n kube-system get secret | grep eks-admin | awk '{print $1}') | fgrep token: | awk '{print $2}'| head -n 1",
              "command_timeout": 60,
              "continue_on_failure": false,
              "display_name": "Execute Linux/Unix SSH Command - get token",
              "runtime_user": {
                "override_target_runtime_user": false,
                "target_default": true
              },
              "skip_execution": false,
              "target": {
                "override_workflow_target": false,
                "override_workflow_target_group_criteria": false,
                "use_workflow_target": true,
                "use_workflow_target_group": false
              }
            },
            "object_type": "definition_activity"
          },
          {
            "unique_name": "definition_activity_01A67KPT7KAZ12wWlUFHtzuA0cvYtV86k8R",
            "name": "Set Variables",
            "title": "Set Variables - token",
            "type": "core.set_multiple_variables",
            "base_type": "activity",
            "properties": {
              "continue_on_failure": false,
              "display_name": "Set Variables - token",
              "skip_execution": false,
              "variables_to_update": [
                {
                  "variable_to_update": "$workflow.definition_workflow_01A64IBF6VJ1L5JW7jADDbTWbfYRQuoMmw6.output.variable_workflow_01A64JFT3HIXQ4EL2BA0dgOSO1uSgFWwoat$",
                  "variable_value_new": "$activity.definition_activity_01A7Q4F66VBR00EANjwsXHLuikcFa1oOwPz.output.response_body$"
                }
              ]
            },
            "object_type": "definition_activity"
          }
        ],
        "categories": [
          "category_1BMfMXSnJMyt5Ihqi7rWJr5N8cf"
        ]
      }
    }
  ]
}